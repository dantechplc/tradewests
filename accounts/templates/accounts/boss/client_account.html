{% extends "accounts/boss/base.html" %}
{% block title %}{{company.name}} | Admin | Client Account{% endblock %}
{% load static %}
{% block content %}
    <div id="content-page" class="content-page">
        <div class="container-fluid">
            <!-- Header -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="iq-card">
                        <div class="iq-card-body p-0">
                            <div class="iq-edit-list">{% include 'accounts/boss/client_header.html' with id=client.id %}</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Account Details Form -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="iq-card">
                        <div class="iq-card-header d-flex justify-content-between align-items-center">
                            <h4 class="card-title mb-0">Account Details</h4>
                        </div>
                        <div class="iq-card-body">
                            <form method="post" novalidate>
                                {% csrf_token %}
                                <div class="row">
                                    <!-- User Name -->
                                    <div class="form-group col-md-6">
                                        <label>User Name</label>
                                        <input type="text"
                                               class="form-control"
                                               value="{{ client.first_name }}"
                                               readonly>
                                    </div>
                                    <!-- Email -->
                                    <div class="form-group col-md-6">
                                        <label>Email</label>
                                        <input type="email"
                                               class="form-control"
                                               value="{{ client.user.email }}"
                                               readonly>
                                    </div>
                                    <!-- Main Balance -->
                                    <div class="form-group col-md-6">
                                        <label for="id_main_balance_0">Main Balance</label>
                                        <input type="number"
                                               step="0.01"
                                               name="main_balance_0"
                                               id="id_main_balance_0"
                                               value="{{ form.main_balance_0.value|default:client.account.main_balance.amount }}"
                                               class="form-control {% if form.main_balance_0.errors %}is-invalid{% endif %}">
                                        <select name="main_balance_1" hidden=""  required="">
                                            <option value="USD">USD</option>
                                        </select>
                                        {% for error in form.main_balance_0.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
                                    </div>
                                    <!-- ROI Balance -->
                                    <div class="form-group col-md-6">
                                        <label for="id_roi_balance">ROI Balance</label>
                                        <input type="text"
                                               readonly
                                               value="{{ form.roi_balance.value|default:client.account.roi_balance }}"
                                               class="form-control">
                                    </div>
                                    <!-- Total Invested -->
                                    <div class="form-group col-md-6">
                                        <label>Total Amount Invested</label>
                                        <input type="text"
                                               readonly
                                               value="{{ client.account.total_amount_investment }}"
                                               class="form-control">
                                    </div>
                                    <!-- Total ROI Received -->
                                    <div class="form-group col-md-6">
                                        <label>Total ROI Received</label>
                                        <input type="text"
                                               readonly
                                               value="{{ client.account.total_roi_received }}"
                                               class="form-control">
                                    </div>
                                    <!-- Total Withdrawn -->
                                    <div class="form-group col-md-6">
                                        <label>Total Successful Withdrawal</label>
                                        <input type="text"
                                               readonly
                                               value="{{ client.account.total_amount_withdrawn }}"
                                               class="form-control">
                                    </div>
                                    <!-- Total Deposited -->
                                    <div class="form-group col-md-6">
                                        <label>Total Successful Deposit</label>
                                        <input type="text"
                                               readonly
                                               value="{{ client.account.total_amount_deposited }}"
                                               class="form-control">
                                    </div>
                                    <!-- Total Expected ROI -->
                                    <div class="form-group col-md-6">
                                        <label>Total Expected ROI</label>
                                        <input type="text"
                                               readonly
                                               value="{{ client.account.total_expected_roi }}"
                                               class="form-control">
                                    </div>
                                </div>
                                <!-- Form Errors (non-field errors) -->
                                {% if form.non_field_errors %}
                                    <div class="alert alert-danger">
                                        {% for error in form.non_field_errors %}<div>{{ error }}</div>{% endfor %}
                                    </div>
                                {% endif %}
                                <!-- Actions -->
                                <div class="mt-3 d-flex justify-content-end">
                                    <button type="reset" class="btn btn-outline-secondary mr-2">Reset</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- SweetAlert2 for success/error messages -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
document.addEventListener('DOMContentLoaded', function () {
  {% if messages %}
    {% for message in messages %}
      Swal.fire({
        title: '{{ message.tags|capfirst }}',
        text: '{{ message }}',
        icon: '{% if message.tags == "success" %}success{% else %}error{% endif %}',
        timer: 5000,
        timerProgressBar: true,
        showConfirmButton: false
      });
    {% endfor %}
  {% endif %}
});
    </script>
{% endblock %}
